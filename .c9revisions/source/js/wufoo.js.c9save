{"ts":1373038475463,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"addEvent(window, 'load', initForm);\r\n\r\nvar highlight_array = new Array();\r\n\r\nfunction initForm(){\r\n\tinitializeFocus();\r\n\tvar activeForm = document.getElementsByTagName('form')[0];\r\n\taddEvent(activeForm, 'submit', disableSubmitButton);\r\n\tifInstructs();\r\n\tshowRangeCounters();\r\n}\r\n\r\nfunction disableSubmitButton() {\r\n\tdocument.getElementById('saveForm').disabled = true;\r\n}\r\n\r\n// for radio and checkboxes, they have to be cleared manually, so they are added to the\r\n// global array highlight_array so we dont have to loop through the dom every time.\r\nfunction initializeFocus(){\r\n\tvar fields = getElementsByClassName(document, \"*\", \"field\");\r\n\t\r\n\tfor(i = 0; i < fields.length; i++) {\r\n\t\tif(fields[i].type == 'radio' || fields[i].type == 'checkbox') {\r\n\t\t\tfields[i].onclick = function() {highlight(this, 4);};\r\n\t\t\tfields[i].onfocus = function() {highlight(this, 4);};\r\n\t\t}\r\n\t\telse if(fields[i].className.match('addr') || fields[i].className.match('other')) {\r\n\t\t\tfields[i].onfocus = function(){highlight(this, 3);};\r\n\t\t}\r\n\t\telse {\r\n\t\t\tfields[i].onfocus = function(){highlight(this, 2); };\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction highlight(el, depth){\r\n\tif(depth == 2){var fieldContainer = el.parentNode.parentNode;}\r\n\tif(depth == 3){var fieldContainer = el.parentNode.parentNode.parentNode;}\r\n\tif(depth == 4){var fieldContainer = el.parentNode.parentNode.parentNode.parentNode;}\r\n\t\r\n\taddClassName(fieldContainer, 'focused', true);\r\n\tvar focusedFields = getElementsByClassName(document, \"*\", \"focused\");\r\n\t\r\n\tfor(i = 0; i < focusedFields.length; i++) {\r\n\t\tif(focusedFields[i] != fieldContainer){\r\n\t\t\tremoveClassName(focusedFields[i], 'focused');\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction ifInstructs(){\r\n\tvar container = document.getElementById('public');\r\n\tif(container){\r\n\t\tremoveClassName(container,'noI');\r\n\t\tvar instructs = getElementsByClassName(document,\"*\",\"instruct\");\r\n\t\tif(instructs == ''){\r\n\t\t\taddClassName(container,'noI',true);\r\n\t\t}\r\n\t\tif(container.offsetWidth <= 450){\r\n\t\t\taddClassName(container,'altInstruct',true);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction showRangeCounters(){\r\n\tcounters = getElementsByClassName(document, \"em\", \"currently\");\r\n\tfor(i = 0; i < counters.length; i++) {\r\n\t\tcounters[i].style.display = 'inline';\r\n\t}\r\n}\r\n\r\nfunction validateRange(ColumnId, RangeType) {\r\n\tif(document.getElementById('rangeUsedMsg'+ColumnId)) {\r\n\t\tvar field = document.getElementById('Field'+ColumnId);\r\n\t\tvar msg = document.getElementById('rangeUsedMsg'+ColumnId);\r\n\r\n\t\tswitch(RangeType) {\r\n\t\t\tcase 'character':\r\n\t\t\t\tmsg.innerHTML = field.value.length;\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase 'word':\r\n\t\t\t\tvar val = field.value;\r\n\t\t\t\tval = val.replace(/\\n/g, \" \");\r\n\t\t\t\tvar words = val.split(\" \");\r\n\t\t\t\tvar used = 0;\r\n\t\t\t\tfor(i =0; i < words.length; i++) {\r\n\t\t\t\t\tif(words[i].replace(/\\s+$/,\"\") != \"\") used++;\r\n\t\t\t\t}\r\n\t\t\t\tmsg.innerHTML = used;\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase 'digit':\r\n\t\t\t\tmsg.innerHTML = field.value.length;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/*--------------------------------------------------------------------------*/\r\n\r\n//http://www.robertnyman.com/2005/11/07/the-ultimate-getelementsbyclassname/\r\nfunction getElementsByClassName(oElm, strTagName, strClassName){\r\n\tvar arrElements = (strTagName == \"*\" && oElm.all)? oElm.all : oElm.getElementsByTagName(strTagName);\r\n\tvar arrReturnElements = new Array();\r\n\tstrClassName = strClassName.replace(/\\-/g, \"\\\\-\");\r\n\tvar oRegExp = new RegExp(\"(^|\\\\s)\" + strClassName + \"(\\\\s|$)\");\r\n\tvar oElement;\r\n\tfor(var i=0; i<arrElements.length; i++){\r\n\t\toElement = arrElements[i];\t\t\r\n\t\tif(oRegExp.test(oElement.className)){\r\n\t\t\tarrReturnElements.push(oElement);\r\n\t\t}\t\r\n\t}\r\n\treturn (arrReturnElements)\r\n}\r\n\r\n//http://www.bigbold.com/snippets/posts/show/2630\r\nfunction addClassName(objElement, strClass, blnMayAlreadyExist){\r\n   if ( objElement.className ){\r\n      var arrList = objElement.className.split(' ');\r\n      if ( blnMayAlreadyExist ){\r\n         var strClassUpper = strClass.toUpperCase();\r\n         for ( var i = 0; i < arrList.length; i++ ){\r\n            if ( arrList[i].toUpperCase() == strClassUpper ){\r\n               arrList.splice(i, 1);\r\n               i--;\r\n             }\r\n           }\r\n      }\r\n      arrList[arrList.length] = strClass;\r\n      objElement.className = arrList.join(' ');\r\n   }\r\n   else{  \r\n      objElement.className = strClass;\r\n      }\r\n}\r\n\r\n//http://www.bigbold.com/snippets/posts/show/2630\r\nfunction removeClassName(objElement, strClass){\r\n   if ( objElement.className ){\r\n      var arrList = objElement.className.split(' ');\r\n      var strClassUpper = strClass.toUpperCase();\r\n      for ( var i = 0; i < arrList.length; i++ ){\r\n         if ( arrList[i].toUpperCase() == strClassUpper ){\r\n            arrList.splice(i, 1);\r\n            i--;\r\n         }\r\n      }\r\n      objElement.className = arrList.join(' ');\r\n   }\r\n}\r\n\r\n//http://ejohn.org/projects/flexible-javascript-events/\r\nfunction addEvent( obj, type, fn ) {\r\n  if ( obj.attachEvent ) {\r\n    obj[\"e\"+type+fn] = fn;\r\n    obj[type+fn] = function() { obj[\"e\"+type+fn]( window.event ) };\r\n    obj.attachEvent( \"on\"+type, obj[type+fn] );\r\n  } \r\n  else{\r\n    obj.addEventListener( type, fn, false );\t\r\n  }\r\n}"]],"start1":0,"start2":0,"length1":0,"length2":5082}]],"length":5082}
