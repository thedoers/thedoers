{"ts":1372954943346,"silentsave":true,"restoring":false,"patch":[[]],"length":0}
{"contributors":[],"silentsave":false,"ts":1372954942047,"patch":[[{"diffs":[[1,"// enquire.js v2.0.2 - Awesome Media Queries in JavaScript\n// Copyright (c) 2013 Nick Williams - http://wicky.nillia.ms/enquire.js\n// License: MIT (http://www.opensource.org/licenses/mit-license.php)\n\n;(function(global) {\n\n    'use strict';\n\n    var matchMedia = global.matchMedia;\n    /*jshint -W098 */\n    /**\n     * Helper function for iterating over a collection\n     *\n     * @param collection\n     * @param fn\n     */\n    function each(collection, fn) {\n        var i      = 0,\n            length = collection.length,\n            cont;\n\n        for(i; i < length; i++) {\n            cont = fn(collection[i], i);\n            if(cont === false) {\n                break; //allow early exit\n            }\n        }\n    }\n\n    /**\n     * Helper function for determining whether target object is an array\n     *\n     * @param target the object under test\n     * @return {Boolean} true if array, false otherwise\n     */\n    function isArray(target) {\n        return Object.prototype.toString.apply(target) === '[object Array]';\n    }\n\n    /**\n     * Helper function for determining whether target object is a function\n     *\n     * @param target the object under test\n     * @return {Boolean} true if function, false otherwise\n     */\n    function isFunction(target) {\n        return typeof target === 'function';\n    }\n\n    /**\n     * Delegate to handle a media query being matched and unmatched.\n     *\n     * @param {object} options\n     * @param {function} options.match callback for when the media query is matched\n     * @param {function} [options.unmatch] callback for when the media query is unmatched\n     * @param {function} [options.setup] one-time callback triggered the first time a query is matched\n     * @param {boolean} [options.deferSetup=false] should the setup callback be run immediately, rather than first time query is matched?\n     * @constructor\n     */\n    function QueryHandler(options) {\n        this.options = options;\n        !options.deferSetup && this.setup();\n    }\n    QueryHandler.prototype = {\n\n        /**\n         * coordinates setup of the handler\n         *\n         * @function\n         */\n        setup : function() {\n            if(this.options.setup) {\n                this.options.setup();\n            }\n            this.initialised = true;\n        },\n\n        /**\n         * coordinates setup and triggering of the handler\n         *\n         * @function\n         */\n        on : function() {\n            !this.initialised && this.setup();\n            this.options.match && this.options.match();\n        },\n\n        /**\n         * coordinates the unmatch event for the handler\n         *\n         * @function\n         */\n        off : function() {\n            this.options.unmatch && this.options.unmatch();\n        },\n\n        /**\n         * called when a handler is to be destroyed.\n         * delegates to the destroy or unmatch callbacks, depending on availability.\n         *\n         * @function\n         */\n        destroy : function() {\n            this.options.destroy ? this.options.destroy() : this.off();\n        },\n\n        /**\n         * determines equality by reference.\n         * if object is supplied compare options, if function, compare match callback\n         *\n         * @function\n         * @param {object || function} [target] the target for comparison\n         */\n        equals : function(target) {\n            return this.options === target || this.options.match === target;\n        }\n\n    };\n/**\n * Represents a single media query, manages it's state and registered handlers for this query\n *\n * @constructor\n * @param {string} query the media query string\n * @param {boolean} [isUnconditional=false] whether the media query should run regardless of whether the conditions are met. Primarily for helping older browsers deal with mobile-first design\n */\nfunction MediaQuery(query, isUnconditional) {\n    this.query = query;\n    this.isUnconditional = isUnconditional;\n    this.handlers = [];\n    this.mql = matchMedia(query);\n\n    var self = this;\n    this.listener = function(mql) {\n        self.mql = mql;\n        self.assess();\n    };\n    this.mql.addListener(this.listener);\n}\nMediaQuery.prototype = {\n\n    /**\n     * add a handler for this query, triggering if already active\n     *\n     * @param {object} handler\n     * @param {function} handler.match callback for when query is activated\n     * @param {function} [handler.unmatch] callback for when query is deactivated\n     * @param {function} [handler.setup] callback for immediate execution when a query handler is registered\n     * @param {boolean} [handler.deferSetup=false] should the setup callback be deferred until the first time the handler is matched?\n     */\n    addHandler : function(handler) {\n        var qh = new QueryHandler(handler);\n        this.handlers.push(qh);\n\n        this.matches() && qh.on();\n    },\n\n    /**\n     * removes the given handler from the collection, and calls it's destroy methods\n     * \n     * @param {object || function} handler the handler to remove\n     */\n    removeHandler : function(handler) {\n        var handlers = this.handlers;\n        each(handlers, function(h, i) {\n            if(h.equals(handler)) {\n                h.destroy();\n                return !handlers.splice(i,1); //remove from array and exit each early\n            }\n        });\n    },\n\n    /**\n     * Determine whether the media query should be considered a match\n     * \n     * @return {Boolean} true if media query can be considered a match, false otherwise\n     */\n    matches : function() {\n        return this.mql.matches || this.isUnconditional;\n    },\n\n    /**\n     * Clears all handlers and unbinds events\n     */\n    clear : function() {\n        each(this.handlers, function(handler) {\n            handler.destroy();\n        });\n        this.mql.removeListener(this.listener);\n        this.handlers.length = 0; //clear array\n    },\n\n    /*\n     * Assesses the query, turning on all handlers if it matches, turning them off if it doesn't match\n     */\n    assess : function() {\n        var action = this.matches() ? 'on' : 'off';\n\n        each(this.handlers, function(handler) {\n            handler[action]();\n        });\n    }\n};\n    /**\n     * Allows for registration of query handlers.\n     * Manages the query handler's state and is responsible for wiring up browser events\n     *\n     * @constructor\n     */\n    function MediaQueryDispatch () {\n        if(!matchMedia) {\n            throw new Error('matchMedia not present, legacy browsers require a polyfill');\n        }\n\n        this.queries = {};\n        this.browserIsIncapable = !matchMedia('only all').matches;\n    }\n\n    MediaQueryDispatch.prototype = {\n\n        /**\n         * Registers a handler for the given media query\n         *\n         * @param {string} q the media query\n         * @param {object || Array || Function} options either a single query handler object, a function, or an array of query handlers\n         * @param {function} options.match fired when query matched\n         * @param {function} [options.unmatch] fired when a query is no longer matched\n         * @param {function} [options.setup] fired when handler first triggered\n         * @param {boolean} [options.deferSetup=false] whether setup should be run immediately or deferred until query is first matched\n         * @param {boolean} [shouldDegrade=false] whether this particular media query should always run on incapable browsers\n         */\n        register : function(q, options, shouldDegrade) {\n            var queries         = this.queries,\n                isUnconditional = shouldDegrade && this.browserIsIncapable;\n\n            if(!queries[q]) {\n                queries[q] = new MediaQuery(q, isUnconditional);\n            }\n\n            //normalise to object in an array\n            if(isFunction(options)) {\n                options = { match : options };\n            }\n            if(!isArray(options)) {\n                options = [options];\n            }\n            each(options, function(handler) {\n                queries[q].addHandler(handler);\n            });\n\n            return this;\n        },\n\n        /**\n         * unregisters a query and all it's handlers, or a specific handler for a query\n         *\n         * @param {string} q the media query to target\n         * @param {object || function} [handler] specific handler to unregister\n         */\n        unregister : function(q, handler) {\n            var query = this.queries[q];\n\n            if(query) {\n                if(handler) {\n                    query.removeHandler(handler);\n                }\n                else {\n                    query.clear();\n                    delete this.queries[q];\n                }\n            }\n\n            return this;\n        }\n    };\n\n\n    global.enquire = global.enquire || new MediaQueryDispatch();\n\n}(this));\n"]],"start1":0,"start2":0,"length1":0,"length2":8837}]],"length":8837,"saved":false}
